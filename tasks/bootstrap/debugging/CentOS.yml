---

- become: True
  block:

  - debug:
      msg: |
        Hostname: {{ ansible_hostname }}
        Fqdn: {{ ansible_fqdn }}
        Inventory Hostname {{ inventory_hostname }}

        Distribution is {{ ansible_distribution }}-{{ ansible_distribution_major_version }}
        Specific version is {{ ansible_distribution_version }}
        OS family is {{ ansible_os_family }}
        Release: {{ ansible_distribution_release }}
        Ansible python version: {{ ansible_python_version }}
        default ipv4: {{ ansible_default_ipv4.address | default('<undefined>') }}

  - name: install a bunch of tools useful for debugging
    package:
      name:
        - mlocate
        - yum-utils
        - telnet
        - wget
        - strace
        - gdb
        - tcpdump
        - lynx
        - wget
        - curl
        - bind-utils
        - iotop
        - dstat
        - procps
        - lsof
        - nmap
        - jq

    # update the mlocate database in the background
  - name: update the mlocate database
    command: updatedb
    async: 1000
    poll: 0
    changed_when: False

